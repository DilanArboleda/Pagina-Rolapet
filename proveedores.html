<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Gestión de Proveedores - ROLAPET</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="icon" href="images/fevicon/alfiler.png" type="image/gif" />
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/responsive.css" />
  <link rel="stylesheet" href="css/colors1.css" />
  <link rel="stylesheet" href="css/custom.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" rel="stylesheet" />

  <style>
    body,
    body, html {
      margin: 0;
      padding: 0;
      font-family: 'Plus Jakarta Sans', Arial, sans-serif;
      background: #f4f5f7;
      min-height: 100vh;
    }

    .container-dashboard {
      display: flex;
      min-height: 100vh;
    }

    /* SIDEBAR (igual que en el panel principal) */
    .sidebar {
      background: #fff;
      color: #555;
      height: 100vh;
      width: 250px;
      position: fixed;
      left: 0;
      top: 0;
      display: flex;
      flex-direction: column;
      border-right: 1px solid #ddd;
      z-index: 20;
      transition: transform 0.2s;
    }

    .sidebar .profile {
      padding: 25px 10px 15px 10px;
      text-align: center;
      border-bottom: 1px solid #ddd;
    }

    .profile img {
      width: 70px;
      border-radius: 50%;
      margin-bottom: 10px;
    }

    .sidebar nav {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .sidebar nav a {
      padding: 13px 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      color: #333;
      text-decoration: none;
      transition: 0.2s;
      border-radius: 8px;
      margin: 2px 10px;
      font-size: 16px;
    }

    .sidebar nav a:hover,
    .sidebar nav a.active {
      background: #2094f3;
      color: white;
    }

    .logout-btn {
      margin-top: auto;
      padding: 14px;
      background: #2094f3;
      color: white;
      text-align: center;
      cursor: pointer;
      font-weight: bold;
      text-decoration: none;
      border-radius: 8px;
      margin: 10px;
      font-size: 15px;
    }

    /* Hamburguesa (igual que en el panel principal) */
    .hamburger {
      display: none;
      position: absolute;
      left: 15px;
      top: 22px;
      width: 33px;
      height: 33px;
      cursor: pointer;
      z-index: 51;
      background: #ffffff;
      border-radius: 8px;
      align-items: center;
      justify-content: center;
    }

    .hamburger i {
      color: #000000;
      font-size: 22px;
    }

    /* HEADER SUPERIOR (igual que en el panel principal) */
    .top-header {
      position: fixed;
      top: 0;
      right: 0;
      left: 250px;
      height: 120px;
      background: white;
      border-bottom: 1px solid #ddd;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 20px;
      z-index: 10;
    }

    .top-header .logo img {
      height: 80px;
    }

    /* MAIN CONTENT GENERAL */
    .main-content {
      margin-left: 250px;
      margin-top: 150px;
      width: calc(100vw - 250px);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 80vh;
      padding: 25px;
      box-sizing: border-box;
    }

    .providers-panel {
      width: 100%;
      max-width: 1100px;
      background: white;
      border-radius: 25px;
      box-shadow: 0 4px 32px rgba(33, 150, 243, 0.07);
      padding: 25px 30px;
      font-size: 16px;
      color: #0e2f44;
      display: flex;
      flex-direction: column;
    }

    .providers-panel h1 {
      font-weight: 800;
      font-size: 1.8rem;
      margin-bottom: 6px;
      color: #0e2f44;
    }

    .providers-panel p {
      font-weight: 500;
      margin-bottom: 16px;
    }

    .btn-primary {
      background: #2094f3;
      color: white;
      padding: 10px 15px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 700;
      font-size: 16px;
      margin-bottom: 14px;
      align-self: flex-start;
    }

    .btn-primary:hover {
      background: #1078d1;
    }

    .btn-danger {
      background: #dc3545;
      color: white;
      padding: 7px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }

    .btn-warning {
      background: #ffc107;
      color: black;
      padding: 7px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }

    /* Barra de filtros */
    .filter-bar {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .filter-bar input,
    .filter-bar select {
      padding: 10px 14px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-family: 'Plus Jakarta Sans', Arial, sans-serif;
      font-size: 16px;
      color: #555;
      outline: none;
      min-width: 160px;
    }

    /* TABLA PROVEEDORES */
    table {
      width: 100%;
      background: white;
      border-collapse: collapse;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(33, 150, 243, 0.1);
      font-size: 16px;
    }

    th, td {
      padding: 14px 18px;
      border-bottom: 1px solid #ddd;
      text-align: left;
    }

    th {
      background: #f0f3f6;
      color: #333;
      font-weight: 700;
    }

    tr:last-child td {
      border-bottom: none;
    }

    /* PANEL LATERAL PARA FORMULARIO */
    .side-panel {
      position: fixed;
      top: 120px;
      right: 0;
      width: 350px;
      height: calc(100% - 120px);
      background: white;
      border-left: 1px solid #ccc;
      padding: 20px 25px;
      display: none;
      box-shadow: -4px 0 8px rgba(33, 150, 243, 0.07);
      font-family: 'Plus Jakarta Sans', Arial, sans-serif;
      font-size: 16px;
      z-index: 30;
    }

    .side-panel h2 {
      margin-top: 0;
      color: #0e2f44;
      font-weight: 800;
      font-size: 1.5rem;
    }

    .side-panel input,
    .side-panel textarea,
    .side-panel select {
      width: 100%;
      padding: 10px 14px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-bottom: 10px;
      font-family: 'Plus Jakarta Sans', Arial, sans-serif;
      font-size: 16px;
      color: #555;
    }

    .close-panel {
      background: #6c757d;
      color: white;
      padding: 8px 12px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      margin-bottom: 10px;
      font-weight: 600;
    }

    /* RESPONSIVE */
    @media (max-width:900px){
      .top-header{ left:0; }
      .main-content{
        margin-left:0;
        width:100vw;
        margin-top:95px;
      }
    }

    @media (max-width:650px){
      .container-dashboard{ flex-direction:column; }

      .sidebar{
        position:absolute;
        left:0;
        top:0;
        width:230px;
        transform:translateX(-100%);
        transition:transform 0.2s;
        height:100vh;
        z-index:50;
      }

      .sidebar.open{ transform:translateX(0); }

      .hamburger{
        display:flex;
      }

      .top-header{
        height:62px;
        padding:0 8px;
        left:0;
      }

      .top-header .logo img{ height:42px; }

      .main-content{
        margin-top:72px;
        width:100vw;
        padding:0 10px;
      }

      .providers-panel{
        margin-top:7px;
        width:100%;
        max-width:100%;
        padding:14px 10px 12px 10px;
        border-radius:10px;
        box-shadow:none;
      }

      .providers-panel h1{
        font-size:1.2rem;
        text-align:center;
      }

      .providers-panel p{
        text-align:center;
      }

      .filter-bar{
        flex-direction:column;
        gap:8px;
      }

      .filter-bar input,
      .filter-bar select{
        width:100%!important;
        font-size:15px;
      }

      table, thead, tbody, th, td, tr{
        display:block;
        width:100%;
      }

      thead tr{ display:none; }

      tbody tr{
        background:#f9fbfc;
        margin:16px 0 18px 0;
        border-radius:10px;
        box-shadow:0 2px 4px rgba(33,150,243,0.04);
        padding:14px 8px;
      }

      td{
        border:none;
        display:flex;
        flex-direction:column;
        align-items:flex-start;
        font-size:15px;
        margin:0 0 8px 0;
        padding:0;
      }

      td:before{
        content:attr(data-label);
        display:block;
        font-weight:bold;
        color:#2094f3;
        margin-bottom:2px;
        font-size:15px;
      }
    }

    @media (max-width:450px){
      .main-content{ margin-top:58px; }
    }
  </style>
</head>

<body id="default_theme" class="it_service">
<div class="container-dashboard">

  <!-- HAMBURGUESA -->
  <div class="hamburger" onclick="toggleSidebar()">
    <i class="fa fa-bars"></i>
  </div>

  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar">
    <div class="profile">
      <img src="images/it_service/administracion.png" alt="Admin" />
      <h3 id="adminName">Administrador</h3>
      <small id="adminEmail">admin@example.com</small>
    </div>

    <nav>
      <a href="perfil_admin_new.html"><i class="fa-solid fa-gauge"></i> Dashboard</a>
      <a href="gestion_usuarios.html"><i class="fa-solid fa-users"></i> Gestión de Usuarios</a>
      <a href="moderacion.html"><i class="fa-solid fa-shield-halved"></i> Moderación</a>
      <a href="puntos_interes.html"><i class="fa-solid fa-location-dot"></i> Puntos de Interés</a>
      <a href="proveedores.html" class="active"><i class="fa-solid fa-truck"></i> Proveedores</a>
      <a href="configuracion.html"><i class="fa-solid fa-gear"></i> Configuración</a>
    </nav>

    <a class="logout-btn" href="index.html">
      <i class="fa-solid fa-right-from-bracket"></i> Cerrar Sesión
    </a>
  </aside>

  <!-- HEADER SUPERIOR -->
  <header class="top-header">
    <div class="logo">
      <a href="index.html"><img src="images/logos/LogoRolaPet.png" alt="logo" /></a>
    </div>
  </header>

  <!-- CONTENIDO PRINCIPAL -->
  <div class="main-content">
    <section class="providers-panel">
      <h1>Gestión de Proveedores</h1>
      <p>Añade, edita y gestiona los proveedores de la plataforma.</p>

      <button class="btn-primary" onclick="openPanel()">+ Nuevo Proveedor</button>

      <!-- Filtros -->
      <div class="filter-bar">
        <input type="text" id="searchInput" placeholder="Buscar proveedor..." onkeyup="filterTable()">
        <select id="statusFilter" onchange="filterTable()">
          <option value="">Todos los estados</option>
          <option value="Activo">Activo</option>
          <option value="Inactivo">Inactivo</option>
        </select>
      </div>

      <!-- Tabla de proveedores -->
      <table id="providerTable">
        <thead>
        <tr>
          <th>Proveedor</th>
          <th>Categoria</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td data-label="Proveedor">Transporte Medellín</td>
          <td data-label="Servicio">Movilidad</td>
          <td data-label="Estado">Activo</td>
          <td data-label="Acciones">
            <button class="btn-warning" onclick="editProvider(this)">Editar</button>
            <button class="btn-danger" onclick="deleteProvider(this)">Eliminar</button>
          </td>
        </tr>
        <tr>
          <td data-label="Proveedor">Tours S.A.</td>
          <td data-label="Servicio">Guías turísticos</td>
          <td data-label="Estado">Inactivo</td>
          <td data-label="Acciones">
            <button class="btn-warning" onclick="editProvider(this)">Editar</button>
            <button class="btn-danger" onclick="deleteProvider(this)">Eliminar</button>
          </td>
        </tr>
        </tbody>
      </table>
    </section>
  </div>

  <!-- PANEL LATERAL -->
  <aside class="side-panel" id="panel">
    <button class="close-panel" onclick="closePanel()">Cerrar</button>

    <h2 id="panelTitle">Nuevo Proveedor</h2>

    <form id="providerForm" method="POST" action="/api/proveedores/guardar">
      <label>Nombre del Proveedor</label>
      <input type="text" name="nombre" required>

      <label>Categoria</label>
      <select name="Categoria" required>
        <option value="Producto">Producto</option>
        <option value="Servicio">Servicio</option>
      </select>

      <label>Estado</label>
      <select name="estado" required>
        <option value="Activo">Activo</option>
        <option value="Inactivo">Inactivo</option>
      </select>

      <button class="btn-primary" type="submit">Guardar</button>
    </form>
  </aside>

</div>

<script>
  function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    sidebar.classList.toggle('open');
  }

  // Datos admin desde localStorage (igual que en los otros archivos)
  document.getElementById('adminName').textContent =
    localStorage.getItem('adminName') || 'Administrador';
  document.getElementById('adminEmail').textContent =
    localStorage.getItem('adminEmail') || 'admin@example.com';

  function openPanel() {
    document.getElementById("panel").style.display = "block";
    document.getElementById("panelTitle").textContent = "Nuevo Proveedor";
    document.getElementById("providerForm").reset();
  }

  function closePanel() {
    document.getElementById("panel").style.display = "none";
  }

  function editProvider(btn) {
    const row = btn.closest("tr");
    const cells = row.getElementsByTagName("td");

    document.getElementById("panel").style.display = "block";
    document.getElementById("panelTitle").textContent = "Editar Proveedor";

    const form = document.getElementById("providerForm");
    form.nombre.value = cells[0].textContent;
    form.servicio.value = cells[1].textContent;
    form.estado.value = cells[2].textContent;
  }

  function deleteProvider(btn) {
    if (confirm("¿Eliminar este proveedor?")) {
      btn.closest("tr").remove();
    }
  }

  function filterTable() {
    const search = document.getElementById("searchInput").value.toLowerCase();
    const status = document.getElementById("statusFilter").value;
    const rows = document.querySelectorAll("#providerTable tbody tr");

    rows.forEach(row => {
      const name = row.children[0].textContent.toLowerCase();
      const state = row.children[2].textContent;

      const matchSearch = name.includes(search);
      const matchStatus = !status || state === status;

      row.style.display = matchSearch && matchStatus ? "" : "none";
    });
  }
</script>

<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/menumaker.js"></script>
<script src="js/wow.js"></script>
<script src="js/custom.js"></script>
</body>
</html>
