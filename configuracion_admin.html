<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RolaPet - Configuración</title>

  <link rel="icon" href="images/fevicon/alfiler.png" type="image/gif" />
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/responsive.css" />
  <link rel="stylesheet" href="css/colors1.css" />
  <link rel="stylesheet" href="css/custom.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" rel="stylesheet"/>

  <style>
    body,
    body, html {
      margin:0;
      padding:0;
      font-family:'Plus Jakarta Sans', Arial, sans-serif;
      background:#f4f5f7;
      min-height:100vh;
    }

    .container-dashboard{
      display:flex;
      min-height:100vh;
    }

    /* SIDEBAR (igual que en los otros paneles) */
    .sidebar{
      width:250px;
      background:#ffffff;
      color:#555;
      height:100vh;
      position:fixed;
      left:0;
      top:0;
      display:flex;
      flex-direction:column;
      border-right:1px solid #ddd;
      z-index:20;
      transition:transform 0.2s;
    }

    .sidebar .profile{
      padding:25px 10px 15px 10px;
      text-align:center;
      border-bottom:1px solid #ddd;
    }

    .profile img{
      width:70px;
      border-radius:50%;
      margin-bottom:10px;
    }

    .sidebar nav{
      flex:1;
      display:flex;
      flex-direction:column;
      gap:2px;
    }

    .sidebar nav a{
      padding:13px 20px;
      display:flex;
      align-items:center;
      gap:12px;
      color:#333;
      text-decoration:none;
      transition:0.2s;
      border-radius:8px;
      margin:2px 10px;
      font-size:16px;
    }

    .sidebar nav a:hover,
    .sidebar nav a.active{
      background:#2094f3;
      color:#fff;
    }

    .logout-btn{
      margin-top:auto;
      padding:14px;
      background:#2094f3;
      color:white;
      text-align:center;
      cursor:pointer;
      font-weight:bold;
      text-decoration:none;
      border-radius:8px;
      margin:10px;
      font-size:15px;
    }

    /* Hamburguesa */
    .hamburger{
      display:none;
      position:absolute;
      left:15px;
      top:22px;
      width:33px;
      height:33px;
      cursor:pointer;
      z-index:51;
      background:#ffffff;
      border-radius:8px;
      align-items:center;
      justify-content:center;
    }

    .hamburger i{
      color:#000000;
      font-size:22px;
    }

    /* HEADER SUPERIOR (igual que en el panel principal) */
    .top-header{
      position:fixed;
      top:0;
      right:0;
      left:250px;
      height:120px;
      background:white;
      border-bottom:1px solid #ddd;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:0 20px;
      z-index:10;
    }

    .top-header .logo img{
      height:80px;
    }

    /* MAIN CONTENT */
    .main-content{
      margin-left:250px;
      margin-top:150px;
      width:calc(100vw - 250px);
      display:flex;
      justify-content:center;
      align-items:flex-start;
      min-height:80vh;
      padding:25px;
      box-sizing:border-box;
    }

    .config-panel{
      width:100%;
      max-width:1100px;
      background:white;
      border-radius:25px;
      box-shadow:0 4px 32px rgba(33,150,243,0.07);
      padding:25px 30px 30px 30px;
      font-size:16px;
      color:#0e2f44;
      display:flex;
      flex-direction:column;
    }

    .config-panel h1{
      color:#0e2f44;
      font-weight:800;
      font-size:1.8rem;
      margin-bottom:6px;
    }

    .description{
      margin-top:-5px;
      margin-bottom:20px;
      color:#555;
      font-weight:500;
    }

    /* TABS */
    .tabs{
      display:flex;
      gap:15px;
      border-bottom:2px solid #ddd;
      margin-bottom:20px;
      flex-wrap:wrap;
    }

    .tabs div{
      padding:10px 15px;
      cursor:pointer;
      font-weight:bold;
      color:#666;
      border-bottom:3px solid transparent;
      font-size:15px;
    }

    .tabs .active{
      color:#2094f3;
      border-bottom:3px solid #2094f3;
    }

    /* TOP ACTIONS */
    .top-actions{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:20px;
      gap:12px;
      flex-wrap:wrap;
    }

    .top-actions input{
      flex:1;
      min-width:200px;
    }

    .btn-primary{
      background:#2094f3;
      color:white;
      padding:10px 15px;
      border-radius:8px;
      text-decoration:none;
      cursor:pointer;
      font-weight:700;
      border:none;
      font-size:16px;
      white-space:nowrap;
    }

    /* CAMPOS GENERALES */
    input, select{
      padding:10px 14px;
      border-radius:8px;
      border:1px solid #ccc;
      font-family:'Plus Jakarta Sans', Arial, sans-serif;
      font-size:16px;
      color:#555;
      outline:none;
    }

    /* TABLA */
    table{
      width:100%;
      border-collapse:collapse;
      background:white;
      border-radius:14px;
      overflow:hidden;
      box-shadow:0 2px 8px rgba(33,150,243,0.1);
    }

    th, td{
      padding:14px 18px;
      border-bottom:1px solid #eee;
      text-align:left;
    }

    th{
      background:#f0f3f6;
      color:#333;
      font-weight:700;
    }

    tr:last-child td{
      border-bottom:none;
    }

    .actions i{
      cursor:pointer;
      margin-right:10px;
      color:#2094f3;
      font-size:18px;
      transition:color 0.2s;
    }

    .actions i:hover{
      color:#1078d1;
    }

    /* PANEL LATERAL */
    .edit-panel{
      position:fixed;
      top:120px;
      right:0;
      width:350px;
      height:calc(100% - 120px);
      background:white;
      border-left:1px solid #ddd;
      padding:20px 25px;
      overflow-y:auto;
      display:none;
      box-shadow:-4px 0 8px rgba(33,150,243,0.07);
      font-family:'Plus Jakarta Sans', Arial, sans-serif;
      font-size:16px;
      z-index:30;
    }

    .edit-panel.open{
      display:block;
    }

    .edit-panel h2{
      margin-top:0;
      color:#0e2f44;
      font-weight:800;
      font-size:1.5rem;
    }

    label{
      font-weight:700;
      margin-top:10px;
      display:block;
      color:#0e2f44;
    }

    .edit-panel input,
    .edit-panel select{
      width:100%;
      margin-top:6px;
    }

    .btn-save{
      background:#2094f3;
      color:white;
      padding:10px;
      border-radius:8px;
      width:100%;
      display:block;
      margin-top:15px;
      font-weight:bold;
      border:none;
      cursor:pointer;
      font-size:17px;
    }

    .btn-cancel{
      background:#ccc;
      color:#2094f3;
      padding:10px;
      border-radius:8px;
      width:100%;
      margin-top:10px;
      text-align:center;
      cursor:pointer;
      border:none;
      font-weight:700;
    }

    /* SECCIÓN BACKUP */
    .backup-section{
      margin-top:40px;
      padding:20px;
      background:white;
      border-radius:14px;
      box-shadow:0 2px 8px rgba(33,150,243,0.05);
    }

    .backup-section h2{
      margin-top:0;
      color:#0e2f44;
      font-weight:800;
      margin-bottom:16px;
    }

    .backup-columns{
      display:flex;
      gap:25px;
      flex-wrap:wrap;
    }

    .backup-col{
      flex:1;
      min-width:260px;
      background:#f9fafb;
      border:1px solid #eee;
      padding:20px;
      border-radius:10px;
    }

    .backup-col h3{
      margin:0 0 10px 0;
      color:#0e2f44;
    }

    .backup-col i{
      font-size:30px;
      margin-bottom:10px;
      color:#2094f3;
    }

    .warning{
      color:#bb0000;
      font-size:14px;
      margin-top:5px;
      margin-bottom:10px;
    }

    .btn-secondary{
      background:#555;
      color:white;
      padding:10px;
      text-align:center;
      border-radius:8px;
      border:none;
      cursor:pointer;
      width:100%;
      font-weight:600;
    }

    /* RESPONSIVE */
    @media (max-width:900px){
      .top-header{ left:0; }
      .main-content{
        margin-left:0;
        width:100vw;
        margin-top:95px;
      }
    }

    @media (max-width:650px){
      .container-dashboard{ flex-direction:column; }

      .sidebar{
        position:absolute;
        left:0;
        top:0;
        width:230px;
        transform:translateX(-100%);
        transition:transform 0.2s;
        height:100vh;
        z-index:50;
      }

      .sidebar.open{ transform:translateX(0); }

      .hamburger{
        display:flex;
      }

      .top-header{
        height:62px;
        padding:0 8px;
        left:0;
      }

      .top-header .logo img{ height:42px; }

      .main-content{
        margin-top:72px;
        width:100vw;
        padding:0 10px;
      }

      .config-panel{
        margin-top:7px;
        width:100%;
        max-width:100%;
        padding:14px 10px 18px 10px;
        border-radius:10px;
        box-shadow:none;
      }

      .config-panel h1{
        font-size:1.2rem;
        text-align:center;
      }

      .description{
        text-align:center;
      }

      .top-actions{
        flex-direction:column;
        align-items:stretch;
      }

      .top-actions input{
        width:100%;
      }

      table, thead, tbody, th, td, tr{
        display:block;
        width:100%;
      }

      thead tr{ display:none; }

      tbody tr{
        background:#f9fbfc;
        margin:16px 0 18px 0;
        border-radius:10px;
        box-shadow:0 2px 4px rgba(33,150,243,0.04);
        padding:14px 8px;
      }

      td{
        border:none;
        display:flex;
        flex-direction:column;
        align-items:flex-start;
        font-size:15px;
        margin:0 0 8px 0;
        padding:0;
      }

      td:before{
        content:attr(data-label);
        display:block;
        font-weight:bold;
        color:#2094f3;
        margin-bottom:2px;
        font-size:15px;
      }

      .backup-columns{
        flex-direction:column;
      }

      .edit-panel{
        top:62px;
        left:0;
        width:100vw!important;
        height:calc(100vh - 62px)!important;
        max-width:100vw!important;
        border-left:none;
        box-shadow:none;
        padding:18px 5vw 10vh 5vw;
        z-index:180;
        border-radius:0 0 18px 18px;
      }
    }

    @media (max-width:450px){
      .main-content{ margin-top:58px; }
    }
  </style>
</head>
<body id="default_theme" class="it_service">

<div class="container-dashboard">

  <!-- HAMBURGUESA -->
  <div class="hamburger" onclick="toggleSidebar()">
    <i class="fa fa-bars"></i>
  </div>

  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar">
    <div class="profile">
      <img src="images/it_service/administracion.png" alt="Admin" />
      <h3 id="adminName">Administrador</h3>
      <small id="adminEmail">admin@example.com</small>
    </div>

    <nav>
      <a href="gestion_usuarios_Admin.html"><i class="fa-solid fa-users"></i> Gestión de Usuarios</a>
      <a href="moderacion_Admin.html"><i class="fa-solid fa-shield-halved"></i> Moderación</a>
      <a href="puntos_interes_Admin.html"><i class="fa-solid fa-location-dot"></i> Puntos de Interés</a>
      <a href="gestion_proveedores_Admin.html"><i class="fa-solid fa-truck"></i> Proveedores</a>
      <a href="configuracion_admin.html" class="active"><i class="fa-solid fa-gear"></i> Configuración</a>
    </nav>

    <a class="logout-btn" href="index.html">
      <i class="fa-solid fa-right-from-bracket"></i> Cerrar Sesión
    </a>
  </aside>

  <!-- HEADER SUPERIOR -->
  <header class="top-header">
    <div class="logo">
      <a href="index.html"><img src="images/logos/LogoRolaPet.png" alt="logo" /></a>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <div class="main-content">
    <section class="config-panel">
      <h1>Configuración y Contenidos</h1>
      <p class="description">Gestiona categorías del mapa, noticias y copias de seguridad de la aplicación.</p>

      <!-- TABS -->
      <div class="tabs">
        <div class="active">Gestión de Categorías del mapa</div>
        <div>Listado de Noticias</div>
        <div>Copia de Seguridad</div>
      </div>

      <!-- ACTIONS -->
      <div class="top-actions">
        <input id="searchInput" type="text" placeholder="Buscar categoría...">
        <button class="btn-primary" onclick="openPanel()">+ Crear Nueva Categoría</button>
      </div>

      <!-- TABLA -->
      <table id="categoryTable">
        <thead>
        <tr>
          <th>NOMBRE DE CATEGORÍA</th>
          <th>PUNTOS ASIGNADOS</th>
          <th>ACCIONES</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td data-label="Nombre de categoría">Museos</td>
          <td data-label="Puntos asignados">50</td>
          <td data-label="Acciones" class="actions">
            <i class="fa-solid fa-pen" onclick="editCategory(this)"></i>
            <i class="fa-solid fa-trash" onclick="deleteCategory(this)"></i>
          </td>
        </tr>
        <tr>
          <td data-label="Nombre de categoría">Parques</td>
          <td data-label="Puntos asignados">30</td>
          <td data-label="Acciones" class="actions">
            <i class="fa-solid fa-pen" onclick="editCategory(this)"></i>
            <i class="fa-solid fa-trash" onclick="deleteCategory(this)"></i>
          </td>
        </tr>
        </tbody>
      </table>

      <!-- BACKUP SECTION -->
      <div class="backup-section">
        <h2>Copia de Seguridad y Restauración</h2>

        <div class="backup-columns">
          <!-- EXPORTAR -->
          <div class="backup-col">
            <i class="fa-solid fa-download"></i>
            <h3>Exportar Copia</h3>
            <p>Genera una copia de seguridad completa de los datos del sistema.</p>
            <button class="btn-primary" onclick="generateBackup()">Generar y Descargar Copia</button>
          </div>

          <!-- RESTAURAR -->
          <div class="backup-col">
            <i class="fa-solid fa-upload"></i>
            <h3>Restaurar Copia</h3>
            <p class="warning">⚠ Esta acción reemplazará los datos actuales</p>
            <input type="file" id="backupFile">
            <button class="btn-secondary" onclick="restoreBackup()">Restaurar</button>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- PANEL LATERAL -->
  <aside class="edit-panel" id="editPanel">
    <h2>Nueva Categoría</h2>

    <label>Nombre de Categoría</label>
    <input type="text" id="catName">

    <label>Puntos Asignados</label>
    <input type="number" id="catPoints">

    <button class="btn-save" onclick="saveCategory()">Guardar</button>
    <button class="btn-cancel" onclick="closePanel()">Cancelar</button>
  </aside>

</div>

<script>
  function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    sidebar.classList.toggle('open');
  }

  // Autocompletar nombre/email igual que en los otros paneles
  document.getElementById('adminName').textContent =
    localStorage.getItem('adminName') || 'Administrador';
  document.getElementById('adminEmail').textContent =
    localStorage.getItem('adminEmail') || 'admin@example.com';

  // ABRIR PANEL
  function openPanel() {
    document.getElementById("editPanel").classList.add("open");
  }

  // CERRAR PANEL
  function closePanel() {
    document.getElementById("editPanel").classList.remove("open");
    document.getElementById("catName").value = "";
    document.getElementById("catPoints").value = "";
    document.querySelector("#editPanel h2").innerText = "Nueva Categoría";
    rowEditing = null;
  }

  // EDITAR CATEGORÍA
  let rowEditing = null;
  function editCategory(el) {
    rowEditing = el.parentElement.parentElement;
    const name = rowEditing.children[0].innerText;
    const points = rowEditing.children[1].innerText;

    document.getElementById("catName").value = name;
    document.getElementById("catPoints").value = points;

    document.querySelector("#editPanel h2").innerText = "Editar Categoría";
    openPanel();
  }

  // GUARDAR CATEGORÍA
  function saveCategory() {
    const name = document.getElementById("catName").value.trim();
    const points = document.getElementById("catPoints").value.trim();

    if (!name || !points) return alert("Completa todos los campos.");

    if (rowEditing) {
      rowEditing.children[0].innerText = name;
      rowEditing.children[1].innerText = points;
      rowEditing = null;
    } else {
      const tableBody = document.querySelector("#categoryTable tbody");
      const row = document.createElement("tr");
      row.innerHTML = `
        <td data-label="Nombre de categoría">${name}</td>
        <td data-label="Puntos asignados">${points}</td>
        <td data-label="Acciones" class="actions">
          <i class="fa-solid fa-pen" onclick="editCategory(this)"></i>
          <i class="fa-solid fa-trash" onclick="deleteCategory(this)"></i>
        </td>
      `;
      tableBody.appendChild(row);
    }

    closePanel();
  }

  // ELIMINAR CATEGORÍA
  function deleteCategory(el) {
    el.parentElement.parentElement.remove();
  }

  // BUSCADOR
  document.getElementById("searchInput").addEventListener("input", function () {
    const val = this.value.toLowerCase();
    document.querySelectorAll("#categoryTable tbody tr").forEach(row => {
      row.style.display = row.innerText.toLowerCase().includes(val) ? "" : "none";
    });
  });

  // GENERAR BACKUP
  function generateBackup() {
    alert("Copia de seguridad generada (simulado).");
  }

  // RESTAURAR BACKUP
  function restoreBackup() {
    const file = document.getElementById("backupFile").files[0];
    if (!file) return alert("Selecciona un archivo para restaurar.");
    alert("Restauración completada (simulado).");
  }
</script>

<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/menumaker.js"></script>
<script src="js/wow.js"></script>
<script src="js/custom.js"></script>
</body>
</html>
